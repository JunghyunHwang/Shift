<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/style.css">
        <title>Shift</title>
    </head>
    <body>
        <div class="top">
            <h1><a href="/">SHIFT</a></h1>
            <nav>
                <ul>
                    <li><a href="/auth/setting">근무설정</a></li>
                    <li><a href="/auth/logout">로그아웃</a></li>
                </ul>
            </nav>
        </div>
        <div class="main">
                {{{button}}}
        <div class="table-shift"></div>
        {{!-- <div id="test"></div> --}}
        <div class="bottom">
            Ja_Hwang. all rights reserved
        </div>
        <script>
            function renderingTable(data)
            {
                const root = document.querySelector('.table-shift');
        
                const table = document.createElement('table');
            
                table.classList.add('table-shift__table');
                
                table.innerHTML = `
                    <thead>
                        <tr></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td></td>
                        </tr>
                    </tbody>
                `;
            
                root.append(table);
        
                table.querySelector('thead tr').textContent = "";
                table.querySelector('tbody').textContent = "";
        
                for(const header of data.headers)
                {
                    table.querySelector('thead tr').insertAdjacentHTML('beforeend', `<th>${header}</th>`);
                }
        
                for(const row of data.rows)
                {
                    table.querySelector('tbody').insertAdjacentHTML('beforeend', `
                        <tr>
                            ${ row.map(col => `<td>${ col }</td>`).join("") }
                        </tr>
                    `)
                }
            }

            const api_url = '/api/{{script}}';
            async function getData()
            {
                const response = await fetch(api_url);
                const data = await response.json();
                console.log(data);
                renderingTable(data);
            }

            getData();
        </script>
    </body>
</html>